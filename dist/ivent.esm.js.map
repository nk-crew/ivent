{"version":3,"file":"ivent.esm.js","sources":["../src/utils/make-event-uid.js","../src/utils/get-element-events.js","../src/utils/parse-event-name.js","../src/utils/normalize-parameters.js","../src/methods/off.js","../src/utils/hydrate-obj.js","../src/utils/handlers.js","../src/methods/on.js","../src/methods/one.js","../src/utils/get-jquery.js","../src/methods/trigger.js"],"sourcesContent":["let uidEvent = 1;\n\nexport default function makeEventUid(element, uid) {\n  // eslint-disable-next-line no-plusplus\n  return (uid && `${uid}::${uidEvent++}`) || element.uidEvent || uidEvent++;\n}\n","import makeEventUid from './make-event-uid';\n\nconst eventRegistry = {}; // Events storage\n\nexport default function getElementEvents(element) {\n  const uid = makeEventUid(element);\n\n  element.uidEvent = uid;\n  eventRegistry[uid] = eventRegistry[uid] || {};\n\n  return eventRegistry[uid];\n}\n","const nativeEvents = new Set([\n  'click',\n  'dblclick',\n  'mouseup',\n  'mousedown',\n  'contextmenu',\n  'mousewheel',\n  'DOMMouseScroll',\n  'mouseover',\n  'mouseout',\n  'mousemove',\n  'selectstart',\n  'selectend',\n  'keydown',\n  'keypress',\n  'keyup',\n  'orientationchange',\n  'touchstart',\n  'touchmove',\n  'touchend',\n  'touchcancel',\n  'pointerdown',\n  'pointermove',\n  'pointerup',\n  'pointerleave',\n  'pointercancel',\n  'gesturestart',\n  'gesturechange',\n  'gestureend',\n  'focus',\n  'blur',\n  'change',\n  'reset',\n  'select',\n  'submit',\n  'focusin',\n  'focusout',\n  'load',\n  'unload',\n  'beforeunload',\n  'resize',\n  'move',\n  'DOMContentLoaded',\n  'readystatechange',\n  'error',\n  'abort',\n  'scroll',\n]);\nconst namespaceRegex = /[^.]*(?=\\..*)\\.|.*/;\nconst stripNameRegex = /\\..*/;\nconst customEvents = {\n  mouseenter: 'mouseover',\n  mouseleave: 'mouseout',\n};\n\nexport default function parseEventName(name) {\n  // Get the native events from namespaced events ('click.ghostkit.button' --> 'click')\n  const eventName = name.replace(stripNameRegex, '');\n\n  return {\n    event: customEvents[eventName] || eventName,\n    originalEvent: eventName,\n    namespace: name.replace(namespaceRegex, '') || false,\n    isNative: nativeEvents.has(eventName),\n  };\n}\n","import parseEventName from './parse-event-name';\n\nexport default function normalizeParameters(originalTypeEvent, handler, delegationFunction) {\n  const isDelegated = typeof handler === 'string';\n  // TODO: Bootstrap tooltip passes `false` instead of selector, so we need to check\n  const callable = isDelegated ? delegationFunction : handler || delegationFunction;\n\n  const parsedEvent = parseEventName(originalTypeEvent);\n  let typeEvent = parsedEvent.event;\n\n  if (!parsedEvent.isNative) {\n    typeEvent = originalTypeEvent;\n  }\n\n  return [isDelegated, callable, typeEvent, parsedEvent];\n}\n","/* eslint-disable no-restricted-syntax */\nimport getElementEvents from '../utils/get-element-events';\nimport normalizeParameters from '../utils/normalize-parameters';\n// eslint-disable-next-line import/no-cycle\nimport { removeHandler, removeNamespacedHandlers } from '../utils/handlers';\n\nconst stripUidRegex = /::\\d+$/;\n\nexport default function off(element, event, handler, delegationFunction) {\n  if (typeof event !== 'string' || !element) {\n    return;\n  }\n\n  event.split(' ').forEach((originalTypeEvent) => {\n    const [isDelegated, callable, typeEvent, parsedEvent] = normalizeParameters(\n      originalTypeEvent,\n      handler,\n      delegationFunction\n    );\n    const events = getElementEvents(element);\n    const storeElementEvent = events[typeEvent] || {};\n    const isNamespace = originalTypeEvent.startsWith('.');\n\n    if (typeof callable !== 'undefined') {\n      // Simplest case: handler is passed, remove that listener ONLY.\n      if (!Object.keys(storeElementEvent).length) {\n        return;\n      }\n\n      removeHandler(element, events, typeEvent, callable, isDelegated ? handler : null);\n      return;\n    }\n\n    if (isNamespace) {\n      for (const elementEvent of Object.keys(events)) {\n        removeNamespacedHandlers(element, events, elementEvent, originalTypeEvent.slice(1));\n      }\n    }\n\n    for (const [keyHandlers, evt] of Object.entries(storeElementEvent)) {\n      const handlerKey = keyHandlers.replace(stripUidRegex, '');\n\n      if (!parsedEvent.namespace || originalTypeEvent.includes(handlerKey)) {\n        removeHandler(element, events, typeEvent, evt.callable, evt.delegationSelector);\n      }\n    }\n  });\n}\n","export default function hydrateObj(obj, meta = {}) {\n  // eslint-disable-next-line no-restricted-syntax\n  for (const [key, value] of Object.entries(meta)) {\n    try {\n      obj[key] = value;\n    } catch {\n      Object.defineProperty(obj, key, {\n        configurable: true,\n        get() {\n          return value;\n        },\n      });\n    }\n  }\n\n  return obj;\n}\n","/* eslint-disable no-restricted-syntax */\n\n// eslint-disable-next-line import/no-cycle\nimport off from '../methods/off';\n\nimport hydrateObj from './hydrate-obj';\nimport makeEventUid from './make-event-uid';\nimport getElementEvents from './get-element-events';\nimport normalizeParameters from './normalize-parameters';\n\nfunction iventHandler(element, fn) {\n  return function handler(event) {\n    hydrateObj(event, { delegateTarget: element });\n\n    if (handler.oneOff) {\n      // eslint-disable-next-line no-use-before-define\n      off(element, event.type, fn);\n    }\n\n    return fn.apply(element, [event]);\n  };\n}\n\nfunction iventDelegationHandler(element, selector, fn) {\n  return function handler(event) {\n    const domElements = element.querySelectorAll(selector);\n\n    for (let { target } = event; target && target !== this; target = target.parentNode) {\n      // eslint-disable-next-line no-restricted-syntax\n      for (const domElement of domElements) {\n        if (domElement !== target) {\n          // eslint-disable-next-line no-continue\n          continue;\n        }\n\n        hydrateObj(event, { delegateTarget: target });\n\n        if (handler.oneOff) {\n          // eslint-disable-next-line no-use-before-define\n          off(element, event.type, selector, fn);\n        }\n\n        return fn.apply(target, [event]);\n      }\n    }\n\n    return false;\n  };\n}\n\nexport function findHandler(events, callable, delegationSelector = null) {\n  return Object.values(events).find(\n    (event) => event.callable === callable && event.delegationSelector === delegationSelector\n  );\n}\n\nexport function addHandler(element, originalTypeEvent, handler, delegationFunction, oneOff) {\n  // eslint-disable-next-line prefer-const\n  let [isDelegated, callable, typeEvent, parsedEvent] = normalizeParameters(\n    originalTypeEvent,\n    handler,\n    delegationFunction\n  );\n\n  // in case of mouseenter or mouseleave wrap the handler within a function that checks for its DOM position\n  // this prevents the handler from being dispatched the same way as mouseover or mouseout does\n  if (parsedEvent.event !== parsedEvent.originalEvent) {\n    const wrapFunction = (fn) => {\n      return function (event) {\n        if (\n          !event.relatedTarget ||\n          (event.relatedTarget !== event.delegateTarget &&\n            !event.delegateTarget.contains(event.relatedTarget))\n        ) {\n          return fn.call(this, event);\n        }\n\n        return false;\n      };\n    };\n\n    callable = wrapFunction(callable);\n  }\n\n  const events = getElementEvents(element);\n  const handlers = events[typeEvent] || (events[typeEvent] = {});\n  const previousFunction = findHandler(handlers, callable, isDelegated ? handler : null);\n\n  if (previousFunction) {\n    previousFunction.oneOff = previousFunction.oneOff && oneOff;\n\n    return;\n  }\n\n  const uid = makeEventUid(callable, parsedEvent.namespace);\n  const fn = isDelegated\n    ? iventDelegationHandler(element, handler, callable)\n    : iventHandler(element, callable);\n\n  fn.delegationSelector = isDelegated ? handler : null;\n  fn.callable = callable;\n  fn.oneOff = oneOff;\n  fn.uidEvent = uid;\n  handlers[uid] = fn;\n\n  element.addEventListener(typeEvent, fn, isDelegated);\n}\n\nexport function removeHandler(element, events, typeEvent, handler, delegationSelector) {\n  const fn = findHandler(events[typeEvent], handler, delegationSelector);\n\n  if (!fn) {\n    return;\n  }\n\n  element.removeEventListener(typeEvent, fn, Boolean(delegationSelector));\n  delete events[typeEvent][fn.uidEvent];\n}\n\nexport function removeNamespacedHandlers(element, events, typeEvent, namespace) {\n  const storeElementEvent = events[typeEvent] || {};\n\n  for (const [handlerKey, event] of Object.entries(storeElementEvent)) {\n    if (handlerKey.includes(namespace)) {\n      removeHandler(element, events, typeEvent, event.callable, event.delegationSelector);\n    }\n  }\n}\n","import { addHandler } from '../utils/handlers';\n\nexport default function on(element, event, handler, delegationFunction) {\n  if (typeof event !== 'string' || !element) {\n    return;\n  }\n\n  event.split(' ').forEach((originalTypeEvent) => {\n    addHandler(element, originalTypeEvent, handler, delegationFunction, false);\n  });\n}\n","import { addHandler } from '../utils/handlers';\n\nexport default function one(element, event, handler, delegationFunction) {\n  if (typeof event !== 'string' || !element) {\n    return;\n  }\n\n  event.split(' ').forEach((originalTypeEvent) => {\n    addHandler(element, originalTypeEvent, handler, delegationFunction, true);\n  });\n}\n","export default function getjQuery() {\n  if (window.jQuery) {\n    return window.jQuery;\n  }\n\n  return null;\n}\n","import getjQuery from '../utils/get-jquery';\nimport hydrateObj from '../utils/hydrate-obj';\nimport parseEventName from '../utils/parse-event-name';\n\nexport default function trigger(element, event, args) {\n  if (typeof event !== 'string' || !element) {\n    return null;\n  }\n\n  const $ = getjQuery();\n  const parsedEvent = parseEventName(event);\n\n  let jQueryEvent = null;\n  let bubbles = true;\n  let nativeDispatch = true;\n  let defaultPrevented = false;\n\n  if (parsedEvent.namespace && $) {\n    jQueryEvent = $.Event(event, args);\n\n    $(element).trigger(jQueryEvent);\n    bubbles = !jQueryEvent.isPropagationStopped();\n    nativeDispatch = !jQueryEvent.isImmediatePropagationStopped();\n    defaultPrevented = jQueryEvent.isDefaultPrevented();\n  }\n\n  const evt = hydrateObj(new Event(event, { bubbles, cancelable: true }), args);\n\n  if (defaultPrevented) {\n    evt.preventDefault();\n  }\n\n  if (nativeDispatch) {\n    element.dispatchEvent(evt);\n  }\n\n  if (evt.defaultPrevented && jQueryEvent) {\n    jQueryEvent.preventDefault();\n  }\n\n  return evt;\n}\n"],"names":["uidEvent","makeEventUid","element","uid","eventRegistry","getElementEvents","nativeEvents","Set","namespaceRegex","stripNameRegex","customEvents","mouseenter","mouseleave","parseEventName","name","eventName","replace","event","originalEvent","namespace","isNative","has","normalizeParameters","originalTypeEvent","handler","delegationFunction","isDelegated","callable","parsedEvent","typeEvent","stripUidRegex","off","split","forEach","events","storeElementEvent","isNamespace","startsWith","Object","keys","length","removeHandler","elementEvent","removeNamespacedHandlers","slice","keyHandlers","evt","entries","handlerKey","includes","delegationSelector","hydrateObj","obj","meta","key","value","defineProperty","configurable","get","iventHandler","fn","delegateTarget","oneOff","type","apply","iventDelegationHandler","selector","domElements","querySelectorAll","target","parentNode","domElement","findHandler","values","find","addHandler","wrapFunction","relatedTarget","contains","call","handlers","previousFunction","addEventListener","removeEventListener","Boolean","on","one","getjQuery","window","jQuery","trigger","args","$","jQueryEvent","bubbles","nativeDispatch","defaultPrevented","Event","isPropagationStopped","isImmediatePropagationStopped","isDefaultPrevented","cancelable","preventDefault","dispatchEvent"],"mappings":"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"}